#!/usr/bin/env python3
"""
Autonomous Auditor Policy - Global CLI Entry Point
Makes policy enforcement available system-wide as 'audit-policy' command
"""

import sys
import os
from pathlib import Path

# Add the auditor directory to Python path
auditor_dir = Path(__file__).parent
sys.path.insert(0, str(auditor_dir))

# Check if we're in a virtual environment, if not, use the project's venv
venv_python = auditor_dir / ".venv" / "bin" / "python"
if not hasattr(sys, 'real_prefix') and not (hasattr(sys, 'base_prefix') and sys.base_prefix != sys.prefix):
    if venv_python.exists():
        # Re-execute with venv python
        os.execv(str(venv_python), [str(venv_python)] + [__file__] + sys.argv[1:])

# Import and run the policy CLI
from policy import main

if __name__ == "__main__":
    main()
